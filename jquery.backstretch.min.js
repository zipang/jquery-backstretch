/*
 * jQuery Backstretch
 * Version 1.3.0
 * https://github.com/zipang/jquery-backstretch
 *
 * Add a dynamically-resized background image to the page
 *
 * Original version Copyright (c) 2011 Scott Robbin (srobbin.com)
 * Dual licensed under the MIT and GPL licenses.
 * http://srobbin.com/jquery-plugins/backstretch/
 *
 * Version 1.3.0
 * Copyright (c) 2012 Christophe Desguez (eidolon-labs.com)
 */
(function(c){var e=("onorientationchange" in window)?c(document):c(window);var b;function d(){b=c("<div>").attr("id","backstretch").css({position:"fixed",left:0,top:0,margin:0,padding:0,overflow:"hidden",zIndex:-999999,height:"100%",width:"100%"}).appendTo("body")}var a={centeredX:true,centeredY:true,stretchMode:"crop",speed:0,transition:function(i,h,g,j){var f=function(){i.fadeIn(h,function(){if(typeof j=="function"){j()}})};if(g.length){g.fadeOut(h,function(){g.remove();f()})}else{f()}}};c.backstretch=function(l,g,m){if(!b){d();c(window).resize(j)}var k=b.data("settings")||a;if(g&&typeof g=="object"){c.extend(k,g);b.data("settings",k)}else{if(g&&typeof g=="function"){m=g}}var i=b.find("img");var h=c("<img>").css({display:"none",zIndex:-999999,width:"auto",height:"auto"}).bind("load",function f(){h.data("ratio",h.width()/h.height());b.data("image",h);j(function n(){k.transition(h,k.speed,i,m)})}).appendTo(b);h.attr("src",l);function j(r){try{var u=e.width(),q=e.height(),o=b.data("image"),n=o.data("ratio");b.width(u).height(q);var s=u;var t=s/n;if(k.stretchMode=="crop"){if(t<q){t=q;s=t*n}}else{if(k.stretchMode=="adapt"){if(n<1){t=q;s=t*n}}else{if(t>q){t=q;s=t*n}}}var v={position:"absolute",left:0,top:0};if(k.centeredY){c.extend(v,{top:((q-t)/2)+"px"})}if(k.centeredX){c.extend(v,{left:((u-s)/2)+"px"})}o.width(s).height(t).css(v)}catch(p){console.log(p)}if(typeof r=="function"){console.log("Transition..");r()}else{console.log("Resizing..")}}return this}})(jQuery);